services:

    elife.hypothesis_client.guzzle.middleware.mock.storage:
        class: Csa\Bundle\GuzzleBundle\Cache\MockStorageAdapter
        arguments:
          - '%api_mock%'
          - ['Authorization', 'Content-Length', 'Host', 'host', 'Referer', 'referer', 'User-Agent', 'user-agent', 'X-Guzzle-Cache']

    elife.hypothesis_client.guzzle.middleware.mock:
        class: Csa\Bundle\GuzzleBundle\GuzzleHttp\Middleware\MockMiddleware
        arguments:
          - '@elife.hypothesis_client.guzzle.middleware.mock.storage'
          - replay
        tags:
          - name: csa_guzzle.middleware
            alias: mock
            priority: -1501
